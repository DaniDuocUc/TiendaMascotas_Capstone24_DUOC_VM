stages:
  - stage: SonarQubeAnalysis
    displayName: SonarQube Analysis Stage
    dependsOn: []
    pool:
      name: 'Azure Pipelines'
    jobs:
      - job: SonarQubeAnalysis
        displayName: SonarQube Analysis
        pool:
          name: 'Azure Pipelines'
        continueOnError: true
        steps:
          - task: SonarQubePrepare@6
            inputs:
              SonarQube: 'sonarqube' # Name of the service connection
              scannerMode: 'CLI'
              configMode: 'manual'
              cliProjectKey: 'Farming_Smart_farming-smart-iot-backend_55eb38f4-98b0-4f45-b978-9aa0ba412df2' # Project key generated by SonarQube
              cliSources: '.'
          - task: SonarQubeAnalyze@6
          - task: SonarQubePublish@6
            inputs:
              pollingTimeoutSec: '300'
